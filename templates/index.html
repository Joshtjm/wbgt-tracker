{% extends "layout.html" %}
{% block content %}
<div class="max-w-md mx-auto mt-12 bg-white p-6 rounded shadow">
  <h2 class="text-xl font-bold mb-4 text-center">Start WBGT Tracker</h2>

  {% if error %}
  <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4">
    <span class="block sm:inline">{{ error }}</span>
  </div>
  {% endif %}

  <form method="POST" class="space-y-4">
    <input type="text" name="username" placeholder="Enter your name" required class="w-full p-2 border rounded" />
    <select name="role" id="role-select" class="w-full p-2 border rounded" required>
      <option value="" disabled selected>Select your role</option>
      {% for role in roles %}
        <option value="{{ role }}">{{ role }}</option>
      {% endfor %}
    </select>

    <!-- Password field (hidden by default) -->
    <div id="password-container" class="hidden">
      <input type="password" name="password" id="password" placeholder="Enter password" class="w-full p-2 border rounded" />
    </div>

    <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">Start</button>
  </form>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const roleSelect = document.getElementById('role-select');
    const passwordContainer = document.getElementById('password-container');

    roleSelect.addEventListener('change', function() {
      if (this.value === 'Conducting Body') {
        passwordContainer.classList.remove('hidden');
      } else {
        passwordContainer.classList.add('hidden');
      }
    });
  });
</script>
{% endblock %}